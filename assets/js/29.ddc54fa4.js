(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{182:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"xss（cross-site-scripting）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss（cross-site-scripting）","aria-hidden":"true"}},[t._v("#")]),t._v(" XSS（Cross-Site Scripting）")]),t._v(" "),a("p",[a("a",{attrs:{name:"7ac32497"}})]),t._v(" "),a("h2",{attrs:{id:"定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义","aria-hidden":"true"}},[t._v("#")]),t._v(" 定义")]),t._v(" "),a("p",[t._v("为了避免和层叠样式表（Cascading Style Sheets）重名，所以改称为 XSS (X一般有未知的含义，还有扩展的含义)。")]),t._v(" "),a("ul",[a("li",[t._v("发生在客户端页面")]),t._v(" "),a("li",[t._v("黑客往页面注入恶意脚本")]),t._v(" "),a("li",[t._v("当用户访问时获取到包含恶意脚本的网页")]),t._v(" "),a("li",[t._v("通过恶意代码，黑客可以获取和控制用户信息（窃取用户隐私、钓鱼欺诈、窃取密码、转播恶意代码等）")]),t._v(" "),a("li",[t._v("主要用到的技术为 HTML 和 Javascript，也包括 VBScript 和 ActionScript 等")]),t._v(" "),a("li",[t._v("对 web 服务器无直接危害，但它会借助网站进行传播，使网站的使用用户受到攻击，导致网站用户帐号被窃取，从而对网站也产生了较严重的危害。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2019/jpeg/114852/1560500963203-e8829fb4-ba36-4868-bb16-6902d304b239.jpeg#align=left&display=inline&height=292&name=xss.jpeg&originHeight=919&originWidth=1995&size=52122&status=done&width=633#align=left&display=inline&height=919&originHeight=919&originWidth=1995&status=done&width=1995",alt:"xss.jpeg"}})]),t._v(" "),a("p",[a("a",{attrs:{name:"788da8ac"}})]),t._v(" "),a("h2",{attrs:{id:"攻击方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#攻击方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 攻击方式")]),t._v(" "),a("p",[a("a",{attrs:{name:"e7529c06"}})]),t._v(" "),a("h3",{attrs:{id:"_1、反射型（非持久性或非存储性）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、反射型（非持久性或非存储性）","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、反射型（非持久性或非存储性）")]),t._v(" "),a("p",[t._v("当前端向后台发送请求时，XSS 恶意代码可能会 "),a("code",[t._v("出现在 URL 参数")]),t._v(" ，作为输入提交到服务器。"),a("code",[t._v("服务器在解析后并响应请求")]),t._v(" ，XSS 代码会随着响应内容一起传回到浏览器，最后 "),a("code",[t._v("在浏览器端解析并得到执行")]),t._v(" 。这个请求、响应的过程像极了一次反射过程，所以被称为反射型 XSS。")]),t._v(" "),a("ul",[a("li",[t._v("是一次性的，必须要通过用户点击链接发起")]),t._v(" "),a("li",[t._v("一些浏览器内置了 XSS 过滤器，会防止大部分反射型 XSS 攻击")]),t._v(" "),a("li",[t._v("服务器没有对用户的恶意输入进行安全处理就响应到页面上，最终导致恶意代码在页面执行")]),t._v(" "),a("li",[t._v("一般是攻击者通过邮件，聊天软件等等方式发送攻击 URL，然后通过用户点击来达到攻击")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2019/jpeg/114852/1560500988343-639d1400-98b6-425f-a6f0-caf0d31f2666.jpeg#align=left&display=inline&height=219&name=%E5%8F%8D%E5%B0%84%E5%9E%8BXSS.jpeg&originHeight=332&originWidth=909&size=128615&status=done&width=600#align=left&display=inline&height=332&originHeight=332&originWidth=909&status=done&width=909",alt:"反射型XSS.jpeg"}})]),t._v(" "),a("p",[a("a",{attrs:{name:"1632db35"}})]),t._v(" "),a("h3",{attrs:{id:"_2、存储型（持久性）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、存储型（持久性）","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、存储型（持久性）")]),t._v(" "),a("p",[t._v("黑客将恶意代码存储到漏洞服务器中，当用户访问相关页面是发起攻击，这种方式和反射型（非持久性）XSS 攻击的区别仅限于此。")]),t._v(" "),a("ul",[a("li",[t._v("黑客将恶意代码上传并存储于漏洞服务器（web server）")]),t._v(" "),a("li",[t._v("服务器将恶意代码保存到服务器")]),t._v(" "),a("li",[t._v("当正常用户访问服务器时，服务器会直接读取恶意数据并直接使用")]),t._v(" "),a("li",[t._v("服务器会返回含有恶意脚本的页面或恶意数据")]),t._v(" "),a("li",[t._v("攻击者一般是通过网站的留言、评论、博客、日志等等功能（所有能够向 web server 输入内容的地方），将攻击代码存储到 web server 上")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2019/jpeg/114852/1560501008587-7de431e6-e2ee-4f85-b810-fac7683f2e65.jpeg#align=left&display=inline&height=323&name=%E5%AD%98%E5%82%A8%E6%80%A7xss.jpeg&originHeight=510&originWidth=685&size=172716&status=done&width=434#align=left&display=inline&height=510&originHeight=510&originWidth=685&status=done&width=685",alt:"存储性xss.jpeg"}})]),t._v(" "),a("p",[a("a",{attrs:{name:"f2daaf70"}})]),t._v(" "),a("h3",{attrs:{id:"_3、dom-型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、dom-型","aria-hidden":"true"}},[t._v("#")]),t._v(" 3、DOM 型")]),t._v(" "),a("p",[t._v("DOM 型 XSS 与反射型 XSS 漏洞大同小异，但是区别在于反射型 XSS 会将语句存储于后端再出现在前端页面，而 DOM 型 XSS 漏洞会直接将语句存储于前端。")]),t._v(" "),a("p",[a("a",{attrs:{name:"fb681491"}})]),t._v(" "),a("h3",{attrs:{id:"三种方式的比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三种方式的比较","aria-hidden":"true"}},[t._v("#")]),t._v(" 三种方式的比较")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("持久性")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("触发时机")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("危害")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("数据存储")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("谁来输出")]),t._v(" "),a("th",[t._v("输出位置")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("反射型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("非持久")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("用户交互")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("较小")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("URL")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("后端 WEB 应用程序")]),t._v(" "),a("td",[t._v("HTTP 响应")])]),t._v(" "),a("tr",[a("td",[t._v("存储型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("持久化（存储在服务器）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不需要用户交互")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("更大")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("数据库")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("后端 WEB 应用程序")]),t._v(" "),a("td",[t._v("HTTP 响应")])]),t._v(" "),a("tr",[a("td",[t._v("DOM 型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("非持久")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("用户交互")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("较小")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("较小")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("DOM")]),t._v(" "),a("td",[t._v("前端 JavaScript")])])])]),t._v(" "),a("p",[a("a",{attrs:{name:"6500d69a"}})]),t._v(" "),a("h2",{attrs:{id:"攻击防御"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#攻击防御","aria-hidden":"true"}},[t._v("#")]),t._v(" 攻击防御")]),t._v(" "),a("p",[t._v("可以通过以下几个方面进行防御操作：")]),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("编码：显示转义编码")]),t._v(" "),a("li",[t._v("过滤：过滤或移除输入的 DOM 事件处理函数、特殊的节点（能引入额外的内容节点，如 style、script、iframe 等）")]),t._v(" "),a("li",[t._v("校正：避免直接对 HTML Entity 解码，而是使用 DOM parse 转换、校正不配对的 DOM 标签")])])]),t._v(" "),a("p",[t._v("1、 给 cookie 设置 httpOnly 属性，使脚本无法读取 Cookie"),a("br"),t._v("在前端 Cookie 都是从 document 对象中获取的，现代浏览器在设置 Cookie 时一般可以接受 httpOnly 名称的参数，和 domain 等其他属性一样。一旦设置了 httpOnly，就无法在浏览器通过 document 对象来获取 Cookie 了。此时浏览器访问页面并不会受到影响，因为 Cookie 会被放在浏览器请求头中发送出去。应用程序一般也不会在 js 中操作这些敏感 Cookie，对于一些敏感的 Cookie 我们可以采用 HttpOnly，对于那些需要通过 js 操作的 cookie 我们就不予设置，这样不仅保障了 Cookie 信息的安全也保证了可应用性。")]),t._v(" "),a("p",[t._v("2、不仅要验证数据的类型，还要验证其格式、长度、范围和内容")]),t._v(" "),a("p",[t._v("3、对输入和 URL 参数进行过滤，对输出进行编码"),a("br"),t._v("首先，不要信任用户的输入。将输入、输出中的引号、尖括号、斜杠等特殊字符进行转义。转义功能函数代码如下：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("escape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/&/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&amp;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/</g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&lt;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/>/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&gt;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v('/"/g')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&quto;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/'/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&#39;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/`/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&#96;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\//g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&#x2F;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" str\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("通过上面方法的转义，我们之前 XSS 攻击代码就会变成：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("escape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script>alert(1)<\/script>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ==> &lt;script&gt;alert(1)&lt;&#x2F;script&gt;")]),t._v("\n")])])]),a("p",[t._v("上面的转义方法对转义普通的非富文本内容是比较好的，但是对富文本来说就不行了。因为富文本是包含格式的，如果调用这个转义方法就会把原本的格式也过滤掉。但是，对于这种情况，我们可以换用黑、白名单的形式对特殊标签进行过滤处理，但是由于富文本包含的标签很多，所以采用白名单形式进行过滤会更好。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xss'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("xss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'<h1 id="title">XSS Demo</h1><script>alert("xss");<\/script>\'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ==> <h1>XSS Demo</h1>&lt;script&gt;alert("xss");&lt;/script&gt;')]),t._v("\n")])])]),a("p",[t._v("上面示例中，使用了 js-xss 来实现，可以看到在输出中保留了 h1 标签且过滤了 script 标签。")]),t._v(" "),a("p",[t._v("4、在发布应用程序之前测试所有已知的威胁")]),t._v(" "),a("p",[a("a",{attrs:{name:"82c58241"}})]),t._v(" "),a("h2",{attrs:{id:"拓展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拓展","aria-hidden":"true"}},[t._v("#")]),t._v(" 拓展")]),t._v(" "),a("p",[a("a",{attrs:{name:"81cea846"}})]),t._v(" "),a("h3",{attrs:{id:"_1、x-xss-protection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、x-xss-protection","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、X-XSS-Protection")]),t._v(" "),a("p",[a("a",{attrs:{name:"0a8d9f32"}})]),t._v(" "),a("h4",{attrs:{id:"报错解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#报错解析","aria-hidden":"true"}},[t._v("#")]),t._v(" 报错解析")]),t._v(" "),a("p",[t._v("在 src/xss/reflect_xss/index.js 文件中，我们通过 express 构建了一个反射型 XSS 工具的案例，其中默认是没有设置 X-XSS-Protection 头信息的，但是在启动服务后，在浏览器访问我们给出的含有 XSS 脚本的链接，浏览器会阻止含 XSS 脚本加载并提示如下错误信息：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("The XSS Auditor refused to execute a script "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000/list?category=%3Cscript%3Ealert(1)%3C/script%3E'")]),t._v(" because its "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" code was found within the request. The auditor was enabled as the server did not send an "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-XSS-Protection'")]),t._v(" header.\n")])])]),a("p",[t._v("提示信息大致意思是说：通过访问这个链接获取的页面执行的脚本包含 XSS 攻击脚本，因为服务端没有设置 "),a("code",[t._v("X-XSS-Protection")]),t._v(" 头，浏览器过滤器会默认开启，过滤掉 XSS 恶意脚本执行。")]),t._v(" "),a("p",[a("a",{attrs:{name:"69fa3701"}})]),t._v(" "),a("h4",{attrs:{id:"作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作用","aria-hidden":"true"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),a("p",[a("code",[t._v("HTTP X-XSS-Protection")]),t._v(" 响应头是 "),a("code",[t._v("Internet Explorer")]),t._v("、"),a("code",[t._v("Chrome")]),t._v(" 和 "),a("code",[t._v("Safari")]),t._v(" 的一个功能，当检测到跨站脚本攻击（XSS）时，浏览器将停止加载页面。虽然这些保护在现代浏览器中基本上是不必要的，但是当网站实施一个强大的 "),a("code",[t._v("Content-Security-Policy")]),t._v(" 来禁用内联的 "),a("code",[t._v("JavaScript（'unsafe-inline'）")]),t._v(" 时，他们仍然可以为尚不支持 CSP 的旧版浏览器的用户提供保护。")]),t._v(" "),a("p",[a("a",{attrs:{name:"f2b0b493"}})]),t._v(" "),a("h4",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁止 XSS 过滤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("XSS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Protection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 浏览器默认设置，启用 XSS 过滤。如果检测到跨站脚本攻击，浏览器将清除页面，即删除不安全的部分。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("XSS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Protection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启用 XSS 过滤。如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("XSS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Protection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("block\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启用 XSS 过滤。 如果检测到跨站脚本攻击，浏览器将清除页面并使用 CSP report-uri 指令的功能发送违规报告。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("XSS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Protection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" report"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("reporting"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("uri"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])}],!1,null,null,null);s.default=n.exports}}]);