<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue 生命周期详解 | LittleLane</title>
    <meta name="description" content="LittleLane的博客">
    <link rel="manifest" href="/blog/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog/assets/css/0.styles.fb084c9e.css" as="style"><link rel="preload" href="/blog/assets/js/app.8628b115.js" as="script"><link rel="preload" href="/blog/assets/js/40.b2aa99ad.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.7c696101.js"><link rel="prefetch" href="/blog/assets/js/11.0789c73b.js"><link rel="prefetch" href="/blog/assets/js/12.461a1f52.js"><link rel="prefetch" href="/blog/assets/js/13.fe3225de.js"><link rel="prefetch" href="/blog/assets/js/14.90707970.js"><link rel="prefetch" href="/blog/assets/js/15.fe5adc74.js"><link rel="prefetch" href="/blog/assets/js/16.0ebb9344.js"><link rel="prefetch" href="/blog/assets/js/17.9ccc244d.js"><link rel="prefetch" href="/blog/assets/js/18.3280c375.js"><link rel="prefetch" href="/blog/assets/js/19.497df057.js"><link rel="prefetch" href="/blog/assets/js/2.a2883561.js"><link rel="prefetch" href="/blog/assets/js/20.32678c14.js"><link rel="prefetch" href="/blog/assets/js/21.1423f536.js"><link rel="prefetch" href="/blog/assets/js/22.f2e999a8.js"><link rel="prefetch" href="/blog/assets/js/23.ba5456dd.js"><link rel="prefetch" href="/blog/assets/js/24.506605c5.js"><link rel="prefetch" href="/blog/assets/js/25.a207ec0f.js"><link rel="prefetch" href="/blog/assets/js/26.2ef516a2.js"><link rel="prefetch" href="/blog/assets/js/27.0fc3d0a8.js"><link rel="prefetch" href="/blog/assets/js/28.857b9f54.js"><link rel="prefetch" href="/blog/assets/js/29.ddc54fa4.js"><link rel="prefetch" href="/blog/assets/js/3.03546f42.js"><link rel="prefetch" href="/blog/assets/js/30.d40e6ea0.js"><link rel="prefetch" href="/blog/assets/js/31.1195eb55.js"><link rel="prefetch" href="/blog/assets/js/32.8de16a5a.js"><link rel="prefetch" href="/blog/assets/js/33.7cd7fe57.js"><link rel="prefetch" href="/blog/assets/js/34.738f5bc5.js"><link rel="prefetch" href="/blog/assets/js/35.77dd47e7.js"><link rel="prefetch" href="/blog/assets/js/36.352ec5b1.js"><link rel="prefetch" href="/blog/assets/js/37.13db91e9.js"><link rel="prefetch" href="/blog/assets/js/38.c6fc1157.js"><link rel="prefetch" href="/blog/assets/js/39.8c2096af.js"><link rel="prefetch" href="/blog/assets/js/4.230e5792.js"><link rel="prefetch" href="/blog/assets/js/41.b6c8edd8.js"><link rel="prefetch" href="/blog/assets/js/42.44ad0cc7.js"><link rel="prefetch" href="/blog/assets/js/43.fb6bd8dc.js"><link rel="prefetch" href="/blog/assets/js/44.f45a0bfd.js"><link rel="prefetch" href="/blog/assets/js/45.3ac2cc18.js"><link rel="prefetch" href="/blog/assets/js/46.763aa6cb.js"><link rel="prefetch" href="/blog/assets/js/47.949030e9.js"><link rel="prefetch" href="/blog/assets/js/48.54ad9db1.js"><link rel="prefetch" href="/blog/assets/js/5.e8583280.js"><link rel="prefetch" href="/blog/assets/js/6.34b724f6.js"><link rel="prefetch" href="/blog/assets/js/7.1c9ebf74.js"><link rel="prefetch" href="/blog/assets/js/8.928845ca.js"><link rel="prefetch" href="/blog/assets/js/9.aac799a8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.fb084c9e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">LittleLane</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/AboutMe/" class="nav-link">关于我</a></div> <a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/AboutMe/" class="nav-link">关于我</a></div> <a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="carbon-ads"></div> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/" class="sidebar-link">Home</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/JavaScript/0x00.html" class="sidebar-link">函数一等公民</a></li><li><a href="/blog/JavaScript/0x01.html" class="sidebar-link">回调函数详解</a></li><li><a href="/blog/JavaScript/0x02.html" class="sidebar-link">高阶函数</a></li><li><a href="/blog/JavaScript/0x03.html" class="sidebar-link">重学 new 操作符</a></li><li><a href="/blog/JavaScript/0x04.html" class="sidebar-link">重学 call、apply</a></li><li><a href="/blog/JavaScript/0x05.html" class="sidebar-link">重学 bind</a></li><li><a href="/blog/JavaScript/0x06.html" class="sidebar-link">重学 Array 之基础概念</a></li><li><a href="/blog/JavaScript/0x07.html" class="sidebar-link">重学 Array 之元素增删</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>DSA</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/" class="sidebar-link">Home</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Node.js</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/" class="sidebar-link">Home</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Tools</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/Tools/Vue-0x00.html" class="sidebar-link">Vue 组件通信详解</a></li><li><a href="/blog/Tools/Vue-0x01.html" class="sidebar-link">v-model 实现原理</a></li><li><a href="/blog/Tools/Vue-0x02.html" class="sidebar-link">Vue $dispatch 和 $broadcast</a></li><li><a href="/blog/Tools/Vue-0x03.html" class="sidebar-link">Vue v-model 源码解析</a></li><li><a href="/blog/Tools/Vue-0x04.html" class="sidebar-link">v-model 后续 input and change</a></li><li><a href="/blog/Tools/Vue-0x05.html" class="active sidebar-link">Vue 生命周期详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#vue-生命周期" class="sidebar-link">Vue 生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#v2-0" class="sidebar-link">V2.0</a></li><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#v1-0" class="sidebar-link">V1.0</a></li><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#v1-0-和-v2-0-生命周期对比" class="sidebar-link">V1.0 和 V2.0 生命周期对比</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Tools/Vue-0x05.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/Tools/Vue-0x06.html" class="sidebar-link">Vue.use() 做了什么？</a></li><li><a href="/blog/Tools/Vue-0x07.html" class="sidebar-link">Vue Router 实现剖析之一</a></li><li><a href="/blog/Tools/Vue-0x08.html" class="sidebar-link">Vue Router 实现剖析之二</a></li><li><a href="/blog/Tools/Vue-0x09.html" class="sidebar-link">Vue Router 实现剖析之三</a></li><li><a href="/blog/Tools/Vue-0x0A.html" class="sidebar-link">Vue Router 实现剖析之五</a></li><li><a href="/blog/Tools/Vue-0x0B.html" class="sidebar-link">数据响应式初探</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>DailyQuestion</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/DailyQuestion/0x00.html" class="sidebar-link">['1', '2', '3'].map(parseInt)</a></li><li><a href="/blog/DailyQuestion/0x01.html" class="sidebar-link">git ssh Permission denied</a></li><li><a href="/blog/DailyQuestion/0x02.html" class="sidebar-link">0.1 + 0.2 !== 0.3</a></li><li><a href="/blog/DailyQuestion/0x03.html" class="sidebar-link">聊聊 a 标签 rel 属性值</a></li><li><a href="/blog/DailyQuestion/0x04.html" class="sidebar-link">浏览器路由 API 详解</a></li><li><a href="/blog/DailyQuestion/0x05.html" class="sidebar-link">VSCode nvm 问题</a></li><li><a href="/blog/DailyQuestion/0x06.html" class="sidebar-link">涉及 new 、this、以及原型链经典习题</a></li><li><a href="/blog/DailyQuestion/0x07.html" class="sidebar-link">DBeaver MySQL 问题集</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>BestPractices</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/" class="sidebar-link">Home</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>SafeOptimize</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/SafeOptimize/0x00.html" class="sidebar-link">JavaScript 加载与执行</a></li><li><a href="/blog/SafeOptimize/0x01.html" class="sidebar-link">函数节流</a></li><li><a href="/blog/SafeOptimize/0x02.html" class="sidebar-link">XSS（Cross-Site Scripting）</a></li><li><a href="/blog/SafeOptimize/0x03.html" class="sidebar-link">CSRF(Cross-Site Request Forgery)</a></li><li><a href="/blog/SafeOptimize/0x04.html" class="sidebar-link">深入函数节流</a></li><li><a href="/blog/SafeOptimize/0x05.html" class="sidebar-link">js 异步加载之 async 和 defer</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="vue-生命周期详解"><a href="#vue-生命周期详解" aria-hidden="true" class="header-anchor">#</a> Vue 生命周期详解</h1> <p><a name="a4d3b02a"></a></p> <h2 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h2> <p>生命周期是对所有事物存在的每个阶段的描述，是世间万事万物的生命写照。比如说人的一生大致会分为这些阶段：婴儿、幼儿、儿童、青春期、中年、老年和死亡。在每个阶段会做不同的事情：</p> <ul><li>婴儿期，由于我们身体还很小，除了我们本能的反应，其他的我们什么都做不了；</li> <li>幼儿期，就要开始学走路、各种闹腾，开始上幼儿园；</li> <li>儿童期，开始上小学，学习的东西会越来越多；</li> <li>青春期，随着我们进入青春期，越来越多奇怪，好奇的想法开始涌入我们的思想，越来越有叛逆的思想和动作；</li> <li>中年：人的一生中最巅峰的时期，在这个阶段就要不停的奋斗，实现自己的价值_[惭愧不已]；_</li> <li>老年：代指人的一生开始慢慢的谢幕了，开始进入养老阶段，回忆之前风光的岁月；</li> <li>死亡：生命消失殆尽，最终会化为泥土。</li></ul> <blockquote><p>当然，看完这些，大家可能会略显伤感：人生也不过如此！</p></blockquote> <p><a name="8192660b"></a></p> <h2 id="vue-生命周期"><a href="#vue-生命周期" aria-hidden="true" class="header-anchor">#</a> Vue 生命周期</h2> <p>上面说的那些大家看看就算了，可千万别去深想，这就是生命的法则。回到我们这篇博客的主题吧，Vue 生命周期。</p> <p>接下来的内容，我们会详细介绍 Vue 2.0 和 Vue 1.0 生命周期的几个阶段。
<a name="V2.0"></a></p> <h3 id="v2-0"><a href="#v2-0" aria-hidden="true" class="header-anchor">#</a> V2.0</h3> <p><img src="https://cdn.nlark.com/yuque/0/2019/png/114852/1552700468984-dbb38ae0-e5aa-4d52-9288-183d396dc6a3.png#align=left&display=inline&height=975&name=lifecycle.png&originHeight=3039&originWidth=1200&size=50021&status=done&width=385" alt="lifecycle.png"><br>先看 <a href="https://cn.vuejs.org/v2/guide/instance.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA" target="_blank" rel="noopener noreferrer">Vue 2.0 的官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>放出来<strong>的一张关于</strong> Vue 生命周期的图，图中非常详细的展示了 Vue 各个生命周期的运转和每个阶段做的事情：</p> <ul><li><p>new Vue() 构造一个 Vue 的实例，这个阶段会做一个 Init 初始化的事情，包括 Events 事件、Lifecycle 生命周期函数等等；</p></li> <li><p>beforeCreate：组件实例被创建之前调用的钩子函数。<strong>此时数据、属性等都还没有初始化</strong>；</p></li> <li><p>created：此时组件 <strong>实例创建完成，数据完成初始化，属性也已经绑定，但是 DOM 还没有渲染，所以 $el 属性此时并不能访问****到；</strong></p></li> <li><p>beforeMount：在 beforeMount 之前会进行组件模板的编译，这个阶段标志着编译好的模板即将被挂载，<strong>此时 $el 属性可以访问到，是编译之前的 DOM；</strong></p></li> <li><p>mounted：<strong>$el 属性值会被编译后的组件模板替换并完成挂载，此时 $el 属性就是我们见到的已经填充数据和绑定事件的 DOM 了</strong>，在这个时候就能操作 DOM 元素了；</p></li> <li><p>beforeUpdate：当我们更新数据状态(更准确的说是 Vue 响应式机制监测到数据状态)变化时，就会触发这个生命周期钩子函数。<strong>当然你也可以在这个函数中进一步更新状态，而不会触发额外的渲染，记住千万不要对同一个状态做多次不同值的****更新，会导致死循环渲染（这里 Vue 内部会处理掉）</strong>；</p></li> <li><p>Updated：这个阶段 Virtual DOM 已经对比完成，<strong>更新的补丁也已经打上，组件已经重新渲染完成</strong>。在这个阶段你可以对新的 DOM 进行操作。<strong>这里<strong><strong>你也可以在这个函数中进一步更新状态，但是不建议这么做，因为会触发额外的更新渲染。记住千万不要对同一个状态做多次不同值的</strong></strong>更新</strong>**，因为这样渲染更新会进入死循环（这里 Vue 内部就不会处理了，会一直渲染下去）；**</p></li> <li><p>beforeDestroy：当我们调用 $destory() 或者跳转页面(keep-alive 除外)、关闭页面时，准确的说就是<strong>卸载组件之前，就会调用该生命周期函数。这时组件实例依然存在并且可用。</strong></p></li> <li><p>destroyed：组件完全被卸载，组件实例完全被销毁时调用。<strong>此时组件实例上的所有事件监听都会被移除，同样子组件的实例也会被销毁。</strong></p></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
      &lt;p&gt;{{message}}&lt;/p&gt;
      &lt;!-- 点击按钮会更新 message 数据状态，导致重新渲染 --&gt;
      &lt;button @click=&quot;message+=1&quot;&gt;click&lt;/button&gt;
      &lt;!-- 点击按钮会调用 $destroy 方法，导致组件实例卸载 --&gt;
      &lt;button @click=&quot;handleDestroy&quot;&gt;destroy&lt;/button&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCreate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>      <span class="token comment">// undefined DOM 还没渲染，所以访问不到，但是在 Vue 实例中是存在的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCreate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>    <span class="token comment">// undefined 数据、属性等都还没有初始化</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCreate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">// undefined 数据、属性等都还没有初始化</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>           <span class="token comment">// undefined DOM 还没渲染，所以访问不到，但是在 Vue 实例中是存在的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>         <span class="token comment">// {__ob__: Observer} 数据、属性等都完成初始化</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">// hello 数据、属性等都完成初始化</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 原始模板 DOM(具体自己运行查看)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeMount'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>        
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeMount'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeMount'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 首次已填充数据的 DOM(具体自己运行查看) 新的实例已经替换了旧的实例</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 按照数据状态变化后填充的新的 DOM (具体自己运行查看)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeUpdate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeUpdate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>    <span class="token comment">// 新的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeUpdate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">// 新的数据</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 按照数据状态变化后填充的新的 DOM (具体自己运行查看)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>        <span class="token comment">// 新的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// 新的数据</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 最近一次挂载的 DOM 实例(具体自己运行查看)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>  <span class="token comment">// 最新数据的状态值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// 最新数据的状态值</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 最近一次挂载的 DOM 实例(具体自己运行查看) </span>
    <span class="token comment">// 但是运行完后，无论你再怎么操作按钮改变数据状态，DOM 都不会渲染</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>	
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>			<span class="token comment">// 最新数据的状态值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// 最新数据的状态值</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 卸载 DOM，销毁实例</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="V1.0"></a></p> <h3 id="v1-0"><a href="#v1-0" aria-hidden="true" class="header-anchor">#</a> V1.0</h3> <p>上面就是关于 V2.0 生命周期的所有阶段的描述了，下面我们说一下 V1.0 的生命周期<br> <img src="https://cdn.nlark.com/yuque/0/2019/png/114852/1552707078257-8ce3b843-e613-44b4-9f64-bcef6230c86c.png#align=left&display=inline&height=824&name=lifecycle%20%281%29.png&originHeight=2800&originWidth=1200&size=116787&status=done&width=353" alt="lifecycle (1).png"><br>相比 V2.0 生命周期，V1.0 的生命周期相对比较粗糙，主要包含以下几个阶段：<br></p> <ul><li><p>new Vue()：构造一个 Vue 的实例，这个阶段会调用 Init 做初始化的事情；</p></li> <li><p>init：实例已经创建，数据响应式未添加；</p></li> <li><p>created：此时实例已经创建，事件初始化完成，数据响应式已经添加，但是 DOM 还没有渲染，所以 $el 属性此时并不能访问到；</p></li> <li><p>beforeCompile：模板编译前被调用，此时 $el 属性就能够访问；</p></li> <li><p>compiled：模板编译完成时被调用；</p></li> <li><p>ready：模板编译完成并完成渲染时被调用；</p></li> <li><p>beforeDestroy：当我们调用 $destory() 或者跳转页面(keep-alive 除外)、关闭页面时，准确的说就是卸载组件之前，就会调用该生命周期函数。这时组件实例依然存在并且可用。</p></li> <li><p>destroyed：组件完全被卸载，组件实例完全被销毁时调用。此时组件实例上的所有事件监听都会被移除，同样子组件的实例也会被销毁。</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
      &lt;p&gt;{{message}}&lt;/p&gt;
      &lt;!-- 点击按钮会更新 message 数据状态，导致重新渲染 --&gt;
      &lt;button @click=&quot;message+=1&quot;&gt;click&lt;/button&gt;
      &lt;!-- 点击按钮会调用 $destroy 方法，导致组件实例卸载 --&gt;
      &lt;button @click=&quot;handleDestroy&quot;&gt;destroy&lt;/button&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>         <span class="token comment">// null 访问不到</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>				<span class="token comment">// {} 尚未初始化</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>			<span class="token comment">// undefined 尚未初始化</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>          <span class="token comment">// undefined DOM 还没渲染，所以访问不到，但是在 Vue 实例中是存在的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>				<span class="token comment">// 数据已经初始化，所以访问得到</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>      <span class="token comment">// 数据已经初始化，所以访问得到</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCompile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在此方法调用之前，会做首次渲染</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCompile'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>    <span class="token comment">// 所以这里是可以拿到值的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCompile'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCompile'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">compiled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在此方法调用之前，会做数据填充，再次渲染</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'compiled'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'compiled'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'compiled'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 渲染完成</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件销毁之前被调用</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件销毁完成之后被调用</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span> 			<span class="token comment">// 这里获取不到值 undefined</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'destroyed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 卸载 DOM，销毁实例</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="a4771338"></a></p> <h3 id="v1-0-和-v2-0-生命周期对比"><a href="#v1-0-和-v2-0-生命周期对比" aria-hidden="true" class="header-anchor">#</a> V1.0 和 V2.0 生命周期对比</h3> <p>上面分别介绍了 Vue 两个大版本的生命周期，改动还挺大的，那么对于熟悉 V1.0 的同学怎样才能更好的切换到 V2.0 呢，下面我们给你了比较的表格数据，大家可以借鉴：</p> <table><thead><tr><th>Vue 1.0</th> <th>Vue2.0</th> <th>Description</th></tr></thead> <tbody><tr><td>init</td> <td>beforeCreate</td> <td>组件实例刚刚被创建，状态还没有初始化</td></tr> <tr><td>created</td> <td>created</td> <td>组件实例创建完成，状态绑定完成，DOM 还没生成，$el 属性访问不到</td></tr> <tr><td>beforeCompile</td> <td>beforeMount</td> <td>模板编译/挂载之前</td></tr> <tr><td>compiled</td> <td>mounted</td> <td>模板编译/挂载之后</td></tr> <tr><td>activate</td> <td></td> <td>模板编译完成</td></tr> <tr><td>ready</td> <td>mounted</td> <td>模板编译/挂载之后</td></tr> <tr><td></td> <td>beforeUpdate</td> <td>数据状态变化时触发</td></tr> <tr><td></td> <td>update</td> <td>组件更新渲染完成后触发</td></tr> <tr><td></td> <td>activated</td> <td>keep-alive 组件激活</td></tr> <tr><td></td> <td>deactivated</td> <td>keep-alive 组件移除</td></tr> <tr><td>attached</td> <td></td> <td>$el 通过指令等附加到 DOM</td></tr> <tr><td>deattached</td> <td></td> <td>$el 通过指令等从 DOM 移除</td></tr> <tr><td>beforeDestroy</td> <td>beforeDestroy</td> <td>组件销毁前调用</td></tr> <tr><td>destroyed</td> <td>destroyed</td> <td>组件销毁后调用</td></tr> <tr><td></td> <td>errorCaptured</td> <td>捕获子组件的错误</td></tr></tbody></table> <p><a name="25f9c7fa"></a></p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>组件的生命周期是一个很重要的概念，通过生命周期我们可以做很多的事情，比如（针对 V2.0 版本）</p> <ul><li>可以在 beforeCreate 中添加 loading 展示；</li> <li>在 mounted 里面操作 DOM、获取后端数据、绑定 window 事件等等；</li> <li>在 beforeUpdate 中修改数据状态（这里需要特别注意），而不会导致重复渲染</li> <li>在 beforeDestroy 中解除绑定的事件，清空全局变量等等</li></ul> <p>但是有很多同学会乱用生命周期，导致不可预测的结果和 bug，所以搞懂生命周期是非常重要的！</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">5/28/2019, 11:30:32 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/Tools/Vue-0x04.html" class="prev">
          v-model 后续 input and change
        </a></span> <span class="next"><a href="/blog/Tools/Vue-0x06.html">
          Vue.use() 做了什么？
        </a>
        →
      </span></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div> <!----></div></div>
    <script src="/blog/assets/js/app.8628b115.js" defer></script><script src="/blog/assets/js/40.b2aa99ad.js" defer></script>
  </body>
</html>
